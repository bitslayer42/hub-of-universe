/*!
 * Raster Map Projection v0.0.5  2016-07-22
 *   https://github.com/tomosn/raster-map-projection
 * Copyright (C) 2016 T.Seno
 * All rights reserved. 
 * @license GPL v3 License (http://www.gnu.org/licenses/gpl.html)
 */
"use strict";var CoordTransform=function(a,b){this.src_x1_=a[0],this.src_y1_=a[1],this.src_x2_=a[2],this.src_y2_=a[3],this.src_width_=a[2]-a[0],this.src_height_=a[3]-a[1],this.dst_x1_=b[0],this.dst_y1_=b[1],this.dst_x2_=b[2],this.dst_y2_=b[3],this.dst_width_=b[2]-b[0],this.dst_height_=b[3]-b[1]};CoordTransform.prototype.forwardPoint=function(a){var b=this.dst_x1_+(a[0]-this.src_x1_)*this.dst_width_/this.src_width_,c=this.dst_y1_+(a[1]-this.src_y1_)*this.dst_height_/this.src_height_;return[b,c]},CoordTransform.prototype.forwardRect=function(a){var b=this.forwardPoint([a[0],a[1]]),c=this.forwardPoint([a[2],a[3]]);return[b[0],b[1],c[0],c[1]]};var ProjMath=function(){};ProjMath.EPSILON=1e-7,ProjMath.clamp=function(a,b,c){return Math.max(b,Math.min(c,a))},ProjMath.atan2Range=function(a,b){var c=a[0]<=a[1]?a[0]:a[1],d=a[0]<=a[1]?a[1]:a[0],e=b[0]<=b[1]?b[0]:b[1],f=b[0]<=b[1]?b[1]:b[0];if(0<=e)return 0<c?[Math.atan2(e,d),Math.atan2(f,c)]:d<0?[Math.atan2(f,d),Math.atan2(e,c)]:[Math.atan2(e,d),Math.atan2(e,c)];if(f<0)return 0<c?[Math.atan2(e,c),Math.atan2(f,d)]:d<0?[Math.atan2(f,c),Math.atan2(e,d)]:[Math.atan2(f,c),Math.atan2(f,d)];if(0<c)return[Math.atan2(e,c),Math.atan2(f,c)];if(d<0){var g=Math.atan2(f,d),h=Math.atan2(e,d);return Math.PI<=g?[g-2*Math.PI,h]:[g,h+2*Math.PI]}return[-Math.PI,Math.PI]},ProjMath.toLambdaPhi=function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]),c=Math.atan2(a[1],a[0]),d=Math.atan2(a[2],b);return{lambda:c,phi:d}},ProjMath.normalizeLambda=function(a){return-Math.PI<=a&&a<Math.PI?a:a-2*Math.PI*Math.floor((a+Math.PI)/(2*Math.PI))},ProjMath.neighborPoint=function(a,b){if(ProjMath.EPSILON<=Math.abs(a.phi-b.phi))return!1;var c=ProjMath.normalizeLambda(a.lambda),d=ProjMath.normalizeLambda(b.lambda);return Math.abs(c-d)<ProjMath.EPSILON},"undefined"!=typeof module&&module.exports&&(module.exports=ProjMath);